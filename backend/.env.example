# ============================================
# FLOW IA - Configuration Backend Complète
# ============================================

# ============================================
# Backend Général
# ============================================
PORT=3001
NODE_ENV=production
JWT_SECRET=une_vraie_phrase_secrete_changez_moi_en_production_minimum_32_caracteres

# ============================================
# Database (Supabase - Recommandé)
# ============================================
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres?sslmode=require
SHADOW_DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres?sslmode=require
SUPABASE_URL=https://[PROJECT-REF].supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Alternative: PostgreSQL local (Docker)
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/vistaflow
# SHADOW_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/vistaflow_shadow

# ============================================
# Redis / BullMQ
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6379

# Alternative: Upstash Redis (production)
# REDIS_URL=redis://default:[PASSWORD]@[ENDPOINT]:6379

# ============================================
# Stripe (Billing)
# ============================================
STRIPE_SECRET_KEY=sk_live_xxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxx
STRIPE_PREMIUM_PRICE_ID=price_xxxxx
STRIPE_ULTRA_PRICE_ID=price_xxxxx

# Test mode
# STRIPE_SECRET_KEY=sk_test_xxxxx
# STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# ============================================
# OpenAI (AI Engine)
# ============================================
OPENAI_API_KEY=sk-xxxxx

# ============================================
# TikTok API
# ============================================
TIKTOK_CLIENT_KEY=xxxx
TIKTOK_CLIENT_SECRET=xxxx
TIKTOK_REDIRECT_URI=https://flowia.com/auth/tiktok/callback
# Local: TIKTOK_REDIRECT_URI=http://localhost:3000/auth/tiktok/callback

# ============================================
# Meta (Instagram / Facebook)
# ============================================
META_APP_ID=xxxx
META_APP_SECRET=xxxx
META_REDIRECT_URI=https://flowia.com/auth/meta/callback
# Local: META_REDIRECT_URI=http://localhost:3000/auth/instagram/callback
META_VERIFY_TOKEN=ton_token_webhook_securise_changez_moi

# ============================================
# Google / YouTube OAuth
# ============================================
GOOGLE_CLIENT_ID=xxxx
GOOGLE_CLIENT_SECRET=xxxx
GOOGLE_REDIRECT_URI=https://flowia.com/auth/google/callback
# Local: GOOGLE_REDIRECT_URI=http://localhost:3000/auth/google/callback

# ============================================
# LinkedIn Headless Browser
# ============================================
LINKEDIN_BROWSER_ENDPOINT=ws://ton_fleet_browser:3000
# Alternative: Playwright local
# LINKEDIN_BROWSER_ENDPOINT=ws://localhost:3000
LINKEDIN_PROXY_URL=http://mon_proxy_residentiel:8080
COOKIES_ENCRYPTION_KEY=une_clef_AES_ultra_longue_32_caracteres_minimum

# ============================================
# CRM Integrations
# ============================================

# Notion
NOTION_API_KEY=secret_xxxx
NOTION_DATABASE_ID=xxxx

# Airtable
AIRTABLE_API_KEY=pat_xxxx
AIRTABLE_BASE_ID=xxxx

# Google Sheets (Service Account)
GOOGLE_SERVICE_ACCOUNT_CREDENTIALS={"type":"service_account","project_id":"xxxx",...}
# Ou fichier JSON séparé
# GOOGLE_SERVICE_ACCOUNT_PATH=./credentials/google-service-account.json

# ============================================
# Frontend URLs
# ============================================
FRONTEND_URL=https://flowia.com
FRONTEND_URLS=https://flowia.com,https://www.flowia.com
# Local: FRONTEND_URL=http://localhost:3000
# Local: FRONTEND_URLS=http://localhost:3000,http://localhost:3001

# ============================================
# Encryption (pour tokens OAuth)
# ============================================
ENCRYPTION_KEY=votre_cle_32_caracteres_pour_chiffrement_AES_256

# ============================================
# Security & Rate Limiting
# ============================================
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# ============================================
# Queue Configuration
# ============================================
QUEUE_CONCURRENCY_INCOMING_MESSAGES=5
QUEUE_CONCURRENCY_AUTO_REPLY=3
QUEUE_CONCURRENCY_BROWSER_LINKEDIN=2
